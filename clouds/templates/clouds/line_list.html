<style>
td,th { padding-left: 1em }
td { text-align: right }
</style>

<p>
Order:
<ul style="display: inline">
{% for field in order_fields %}
<li style="display: inline; margin-right: 3em;">
    <a href="?order={{field}}">{{field}}</a>
    <a href="?order=-{{field}}">(reverse)</a>
</li>
{% endfor %}
</p>

{% load url from future %}

{% include 'pagination.html' %}

<table>
<tr>
    <th>ID</th>
    <th>Sidpoints</th>
    <th>Realpoints</th>
    <th>Average Flux</th>
    <th>Max Flux</th>
    <th>StdDev Flux</th>
    {% with line_list|first as line %}
    {% if line.ratio %}
        <th>Ratio</th>
    {% endif %}
    <th></th>
    <th>Beginning</th>
    <th>End</th>
    {% endwith %}
</tr>
{% for line in line_list %}
<tr>
    <td>
        <a href="{% url 'clouds.views.line' pk=line.pk %}">
            {{ line.pk }}
        </a>
    </td>
    <td>
        <a href="{% url 'clouds.views.line_sidpoints' line=line.pk %}">
        {{ line.sidpoint_count }}</a>
    </td>
    <td>
        <a href="{% url 'clouds.views.line_realpoints' line=line.pk %}">
            {{ line.realpoint_count }}</a>
    </td>
    <td>{{ line.average_flux }}</td>
    <td>{{ line.max_flux }}</td>
    <td>{{ line.stddev_flux }}</td>
    {% if line.ratio %}
        <td>{{ line.ratio }}</td>
    {% endif %}
    <td>
        <a href="{% url 'clouds.views.line_realpoints_plot' line=line.pk %}">
            Realpoint Plot</a>
    </td>
    <td>
        {% with line.first_sidpoint as sidpoint %}
        {% if sidpoint %}
        <a href="{% url 'clouds.views.sidtime' pk=sidpoint.sidtime.pk %}?point={{sidpoint.pk}}">
            {{sidpoint.sidtime.time|time:"H:i" }}</a>
        {% endif %}
        {% endwith %}
    </td>
    <td>
        {% with line.last_sidpoint as sidpoint %}
        {% if sidpoint %}
        <a href="{% url 'clouds.views.sidtime' pk=sidpoint.sidtime.pk %}?point={{sidpoint.pk}}">
            {{sidpoint.sidtime.time|time:"H:i" }}</a>
        {% endif %}
        {% endwith %}
    </td>
</tr>
{% endfor %}
</table>

{% include 'pagination.html' %}
